<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>DataTable by veracross</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>DataTable</h1>
        <p>A library for turning ruby collections into HTML tables.</p>

        <p class="view"><a href="https://github.com/veracross/data-table">View the Project on GitHub <small>veracross/data-table</small></a></p>


        <ul>
          <li><a href="https://github.com/veracross/data-table/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/veracross/data-table/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/veracross/data-table">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>DataTable</h1>

<p><a href="http://travis-ci.org/veracross/data-table"><img src="https://secure.travis-ci.org/veracross/data-table.png" alt="Build Status"></a>
<a href="https://codeclimate.com/github/veracross/data-table"><img src="https://codeclimate.com/github/veracross/data-table.png" alt="Code Climate"></a></p>

<p>DataTable renders collections (an array of hashes or ActiveRecord models) as HTML tables.</p>

<h2>Install</h2>

<div class="highlight"><pre><span class="n">gem</span> <span class="n">install</span> <span class="n">data</span><span class="o">-</span><span class="n">table</span>
</pre></div>

<p>or, in your Gemfile</p>

<div class="highlight"><pre><span class="n">gem</span> <span class="s1">'data-table'</span>
</pre></div>

<h3>Basic Usage</h3>

<p>the normal usage is to call the <code>DataTable.render()</code> method and pass it a collection.  The method also takes a block which can be used to configure the table.  The column method takes a symbol for the first parameter.  If the symbol matches a key in the @collection, then that value is printed in the cell.</p>

<div class="highlight"><pre><span class="no">DataTable</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="vi">@collection</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
  <span class="n">t</span><span class="o">.</span><span class="n">column</span> <span class="ss">:column_1</span><span class="p">,</span> <span class="s2">"Title"</span>
  <span class="n">t</span><span class="o">.</span><span class="n">column</span> <span class="ss">:column_2</span><span class="p">,</span> <span class="s2">"Title 2"</span>
<span class="k">end</span>
</pre></div>

<h3>Custom Cell Renderer</h3>

<p>Sometimes you want to use Ruby code to customize the value for a cell.  This can be done by passing a block to the .column method</p>

<div class="highlight"><pre><span class="no">DataTable</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="vi">@collection</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
   <span class="n">t</span><span class="o">.</span><span class="n">column</span> <span class="ss">:column_id</span><span class="p">,</span> <span class="s2">"Title"</span> <span class="k">do</span> <span class="o">|</span><span class="n">value</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">column_index</span><span class="o">|</span>
     <span class="s2">"The value is: </span><span class="si">#{</span><span class="n">value</span><span class="si">}</span><span class="s2">"</span>
   <span class="k">end</span>
<span class="k">end</span>
</pre></div>

<p>You don't need to pass in all of the block parameters; just the ones up to the one you need.</p>

<p><strong>Tip</strong> The column_id doesn't need to be an actual key in the collection.  You can just make up an arbitrary column id and use the block renderer to customize the value for a column.</p>

<h3>All Table Configuration Options</h3>

<pre><code>id: the html id
title: the title of the data table
subtitle: the subtitle of the data table
css_class: an extra css class to get applied to the table
empty_text: the text to display of the collection is empty
display_header =&gt; false: hide the column headers for the data table
alternate_rows =&gt; false: turn off alternating of row css classes
alternate_cols =&gt; true: turn on alternating of column classes, defaults to false
</code></pre>

<h3>Totals</h3>

<p>It is possible to setup totals &amp; subtotals.   Total columns take the name of the column that should be totaled.</p>

<p>They also take a default aggregate function name and/or a block
If only a default function is given, then it is used to calculate the total
If only a block is given then only it is used to calculated the total
If both a block and a function are given then the default aggregate function is called first then its result is passed into the block for further processing.</p>

<div class="highlight"><pre><span class="no">DataTable</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="vi">@collection</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
  <span class="n">t</span><span class="o">.</span><span class="n">column</span> <span class="ss">:column_1</span><span class="p">,</span> <span class="s2">"Title"</span>
  <span class="n">t</span><span class="o">.</span><span class="n">column</span> <span class="ss">:column_2</span><span class="p">,</span> <span class="s2">"Title 2"</span>
  <span class="n">t</span><span class="o">.</span><span class="n">column</span> <span class="ss">:column_3</span><span class="p">,</span> <span class="s2">"Title 3"</span>

  <span class="n">t</span><span class="o">.</span><span class="n">total</span> <span class="ss">:column_1</span><span class="p">,</span> <span class="ss">:sum</span>
  <span class="n">t</span><span class="o">.</span><span class="n">total</span> <span class="ss">:column_2</span> <span class="k">do</span> <span class="o">|</span><span class="n">values</span><span class="o">|</span>

  <span class="k">end</span>

  <span class="n">t</span><span class="o">.</span><span class="n">total</span><span class="p">(</span><span class="ss">:column_3</span><span class="p">,</span> <span class="ss">:sum</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">aggregate_total</span><span class="o">|</span>
    <span class="n">format_money</span><span class="p">(</span><span class="n">aggregate_total</span><span class="p">)</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>

<p>Possible default functions: <code>:sum</code>, <code>:avg</code>, <code>:min</code>, <code>:max</code></p>

<h3>Sub Totals</h3>

<p>SubTotals work in a similar way to Totals.  The main difference is that you need to call group by to specificy the different subtotal groupings</p>

<div class="highlight"><pre><span class="no">DataTable</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="vi">@collection</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
  <span class="n">t</span><span class="o">.</span><span class="n">column</span> <span class="ss">:column_1</span><span class="p">,</span> <span class="s2">"Title"</span>
  <span class="n">t</span><span class="o">.</span><span class="n">column</span> <span class="ss">:column_2</span><span class="p">,</span> <span class="s2">"Title 2"</span>
  <span class="n">t</span><span class="o">.</span><span class="n">column</span> <span class="ss">:column_3</span><span class="p">,</span> <span class="s2">"Title 3"</span>

  <span class="n">t</span><span class="o">.</span><span class="n">group_by</span> <span class="ss">:column_1</span>

  <span class="n">t</span><span class="o">.</span><span class="n">subtotal</span> <span class="ss">:column_2</span><span class="p">,</span> <span class="ss">:sum</span>

<span class="k">end</span>
</pre></div>

<p>It is possible to use <code>group_by</code> on its own without subtotaling.</p>

<p>You can also combine subtotals &amp; totals in the same table.</p>

<h2>Credits</h2>

<p>Nearly all of the code for this was written by <a href="https://github.com/smerickson" class="user-mention">@smerickson</a>, and later gemified by <a href="https://github.com/sixfeetover" class="user-mention">@sixfeetover</a>.</p>

<h2>License</h2>

<p>Copyright (c) 2012-2013 Jeff Fraser (Veracross LLC) <a href="mailto:jfraser@breuer.com">jfraser@breuer.com</a></p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/veracross">veracross</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-38176585-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>